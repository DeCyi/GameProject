[gd_scene load_steps=10 format=3 uid="uid://opfrfv7skwd5"]

[ext_resource type="PackedScene" uid="uid://c3ewo1ey6tabt" path="res://Scenes/joystick.tscn" id="1_amcah"]
[ext_resource type="Script" path="res://Scenes/CharacterBody2D.gd" id="2_u4xff"]
[ext_resource type="Texture2D" uid="uid://dbw641pdr7c5k" path="res://Sprites/SilverWolf.png" id="3_i13jr"]
[ext_resource type="Texture2D" uid="uid://bku3iwlgs851e" path="res://Sprites/1306-chibi-paimon-smug.png" id="4_g0ywk"]
[ext_resource type="Texture2D" uid="uid://ctx21d3ro28ls" path="res://Sprites/1105-yunjinwink.png" id="5_a3edw"]

[sub_resource type="GDScript" id="GDScript_ys6r4"]
script/source = "extends Node2D

@export var speed = 400
# @onready var animation_eto = #P/CharacterAnimation
# @onready var animatedSprite = 
var paused

var is_dragging = false
var touchpos = 0

func _input(event):
	''' if event is InputEventMouseButton:
		if event.is_pressed():
			is_dragging = true
		else:
			is_dragging = false
			$Sprite2D.global_position = event.position '''
			
	
	
	if event is InputEventScreenDrag:
		if event.is_pressed():
			is_dragging = true
			animation_eto.play(\"animation\")
			
		else:
			is_dragging = false
			$CharacterBody2D/Sprite2D.global_position = event.position
			animation_eto.stop()
			
			
	
			
# Called when the node enters the scene tree for the first time.
func _ready():
	Audio.stop_music()


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass


func _on_collision_shape_2d_draw():
	pass # Replace with function body.


func _on_button_pressed():
	$PauseMenu.set_visible(true)
	$Button.set_visible(false)
	get_tree().paused = true
	
	

	
func resumegame():	
	get_tree().paused = false
	$PauseMenu.set_visibile(false)
	$Button.set_visibile(true)


func _on_menu_pressed():
	get_tree().paused = false
	get_tree().change_scene_to_file(\"res://Scenes/Main.tscn\") # Switches to Main Menu


func _on_resume_pressed():
	get_tree().paused = false # Unpauses the game
	$PauseMenu.visible = false # Hides pause menu
	$Button.visible = true # Makes pause button visible again
"

[sub_resource type="SpriteFrames" id="SpriteFrames_fvgmi"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": ExtResource("3_i13jr")
}, {
"duration": 1.0,
"texture": ExtResource("4_g0ywk")
}, {
"duration": 1.0,
"texture": ExtResource("5_a3edw")
}],
"loop": true,
"name": &"animation",
"speed": 15.0
}]

[sub_resource type="CircleShape2D" id="CircleShape2D_1b07w"]

[sub_resource type="Theme" id="Theme_bwi1q"]

[node name="Node2D" type="Node2D"]
position = Vector2(-1, 0)
script = SubResource("GDScript_ys6r4")
speed = null

[node name="Label" type="Label" parent="."]
offset_left = -1332.0
offset_top = -64.0
offset_right = -654.0
offset_bottom = 218.0
theme_override_font_sizes/font_size = 80
text = "We're cooked 
lmaooooooo"
uppercase = true
metadata/_edit_use_anchors_ = true

[node name="Camera2D" type="Camera2D" parent="."]

[node name="Joystick" parent="Camera2D" instance=ExtResource("1_amcah")]

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(633, 340)
input_pickable = true
script = ExtResource("2_u4xff")
metadata/_edit_group_ = true

[node name="CharacterAnimation" type="AnimatedSprite2D" parent="Player"]
position = Vector2(-905, -197)
sprite_frames = SubResource("SpriteFrames_fvgmi")
animation = &"animation"
frame = 1
frame_progress = 0.740892
metadata/_edit_lock_ = true

[node name="Sprite2D" type="Sprite2D" parent="Player"]
position = Vector2(-2, -6)
scale = Vector2(0.347656, 0.347656)
texture = ExtResource("5_a3edw")

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
position = Vector2(-1, -1)
shape = SubResource("CircleShape2D_1b07w")
one_way_collision = true
metadata/klkl = true

[node name="ColorRect" type="ColorRect" parent="."]
z_index = -1
offset_left = 1.0
offset_top = 1.0
offset_right = 1283.0
offset_bottom = 714.0
mouse_filter = 2
color = Color(0.698039, 0.831373, 0.839216, 1)
metadata/_edit_lock_ = true

[node name="PauseMenu" type="Panel" parent="."]
process_mode = 2
visible = false
z_index = 1
offset_left = 1.0
offset_top = -6.0
offset_right = 1281.0
offset_bottom = 714.0
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="Label" type="Label" parent="PauseMenu"]
layout_mode = 0
offset_left = 559.0
offset_top = 181.0
offset_right = 742.0
offset_bottom = 226.0
theme_override_font_sizes/font_size = 32
text = "Main Menu"

[node name="Menu" type="Button" parent="PauseMenu"]
process_mode = 2
layout_mode = 0
offset_left = 526.0
offset_top = 332.0
offset_right = 790.0
offset_bottom = 366.0
text = "Menu"

[node name="Resume" type="Button" parent="PauseMenu"]
process_mode = 2
layout_mode = 0
offset_left = 526.0
offset_top = 278.0
offset_right = 790.0
offset_bottom = 314.0
text = "Resume"

[node name="Button" type="Button" parent="."]
offset_left = 29.0
offset_top = 20.0
offset_right = 101.0
offset_bottom = 51.0
theme = SubResource("Theme_bwi1q")
text = "Pause"

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="TouchScreenButton" type="TouchScreenButton" parent="."]
position = Vector2(159, 618)
scale = Vector2(3.68, 1)

[connection signal="draw" from="Player/CollisionShape2D" to="." method="_on_collision_shape_2d_draw"]
[connection signal="pressed" from="PauseMenu/Menu" to="." method="_on_menu_pressed"]
[connection signal="pressed" from="PauseMenu/Resume" to="." method="_on_resume_pressed"]
[connection signal="pressed" from="Button" to="." method="_on_button_pressed"]
