[gd_scene load_steps=10 format=3 uid="uid://opfrfv7skwd5"]

[ext_resource type="PackedScene" uid="uid://c3ewo1ey6tabt" path="res://Scenes/joystick.tscn" id="1_amcah"]
[ext_resource type="Script" path="res://Scenes/CharacterBody2D.gd" id="2_u4xff"]
[ext_resource type="Texture2D" uid="uid://be74flilgaxik" path="res://Sprites/Character/Run.png" id="3_jwbe7"]

[sub_resource type="GDScript" id="GDScript_ys6r4"]
script/source = "extends Node2D

@export var speed = 1200
# @onready var animation_eto = #P/CharacterAnimation
# @onready var animatedSprite = 
var paused

var is_dragging = false
var touchpos = 0


func _input(event):
	pass
# Called when the node enters the scene tree for the first time.
func _ready():
	Audio.stop_music()
	$Player/AnimationPlayer.play(\"Idle\")

# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):
	pass


func _on_collision_shape_2d_draw():
	pass # Replace with function body.


func _on_button_pressed():
	$PauseMenu.set_visible(true) # Shows pause menu
	$Button.set_visible(false) # Hides the pause button
	get_tree().paused = true # Pauses the game

func _on_menu_pressed():
	get_tree().paused = false # Pauses the game 
	get_tree().change_scene_to_file(\"res://Scenes/Main.tscn\") # Switches to Main Menu


func _on_resume_pressed():
	get_tree().paused = false # Unpauses the game
	$PauseMenu.visible = false # Hides pause menu
	$Button.visible = true # Makes pause button visible again
"

[sub_resource type="CircleShape2D" id="CircleShape2D_1b07w"]

[sub_resource type="Animation" id="Animation_115kd"]
resource_name = "Idle"
length = 1.05
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("CharacterSprite:frame")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(-0.1, 0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1),
"transitions": PackedFloat32Array(1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1),
"update": 1,
"values": [0, 1, 2, 3, 4, 5, 6, 7, 8, 8, 8, 9]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_lousm"]
_data = {
"Idle": SubResource("Animation_115kd")
}

[sub_resource type="Theme" id="Theme_bwi1q"]

[sub_resource type="TileSet" id="TileSet_1amq8"]

[node name="Node2D" type="Node2D"]
position = Vector2(-1, 0)
script = SubResource("GDScript_ys6r4")

[node name="Camera2D" type="Camera2D" parent="."]
position = Vector2(640, 356)

[node name="Joystick" parent="Camera2D" instance=ExtResource("1_amcah")]
position = Vector2(-517, 241)

[node name="Player" type="CharacterBody2D" parent="."]
position = Vector2(633, 340)
script = ExtResource("2_u4xff")
metadata/_edit_group_ = true

[node name="Sprite2D" type="Sprite2D" parent="Player"]
position = Vector2(-2, -6)
scale = Vector2(3.5625, 3.5625)
texture = ExtResource("3_jwbe7")
hframes = 12
frame = 9

[node name="CollisionShape2D" type="CollisionShape2D" parent="Player"]
position = Vector2(-1, -1)
shape = SubResource("CircleShape2D_1b07w")
one_way_collision = true
metadata/klkl = true

[node name="AnimationPlayer" type="AnimationPlayer" parent="Player"]
libraries = {
"": SubResource("AnimationLibrary_lousm")
}

[node name="Camera2D" type="Camera2D" parent="Player"]

[node name="Background" type="ColorRect" parent="."]
z_index = -1
offset_left = -14.0
offset_top = -17.0
offset_right = 1268.0
offset_bottom = 696.0
mouse_filter = 2
color = Color(0.698039, 0.831373, 0.839216, 1)

[node name="PauseMenu" type="Panel" parent="."]
process_mode = 2
visible = false
z_index = 1
offset_left = 1.0
offset_top = -6.0
offset_right = 1281.0
offset_bottom = 714.0
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="Label" type="Label" parent="PauseMenu"]
layout_mode = 0
offset_left = 559.0
offset_top = 181.0
offset_right = 742.0
offset_bottom = 226.0
theme_override_font_sizes/font_size = 32
text = "Main Menu"

[node name="Menu" type="Button" parent="PauseMenu"]
process_mode = 2
layout_mode = 0
offset_left = 526.0
offset_top = 332.0
offset_right = 790.0
offset_bottom = 366.0
text = "Menu"

[node name="Resume" type="Button" parent="PauseMenu"]
process_mode = 2
layout_mode = 0
offset_left = 526.0
offset_top = 278.0
offset_right = 790.0
offset_bottom = 314.0
text = "Resume"

[node name="Button" type="Button" parent="."]
offset_left = 28.0
offset_top = 18.0
offset_right = 100.0
offset_bottom = 49.0
theme = SubResource("Theme_bwi1q")
text = "Pause"

[node name="Timer" type="Timer" parent="."]
autostart = true

[node name="TouchScreenButton" type="TouchScreenButton" parent="."]
position = Vector2(159, 618)
scale = Vector2(3.68, 1)

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_1amq8")
rendering_quadrant_size = 20
format = 2

[connection signal="draw" from="Player/CollisionShape2D" to="." method="_on_collision_shape_2d_draw"]
[connection signal="pressed" from="PauseMenu/Menu" to="." method="_on_menu_pressed"]
[connection signal="pressed" from="PauseMenu/Resume" to="." method="_on_resume_pressed"]
[connection signal="pressed" from="Button" to="." method="_on_button_pressed"]
